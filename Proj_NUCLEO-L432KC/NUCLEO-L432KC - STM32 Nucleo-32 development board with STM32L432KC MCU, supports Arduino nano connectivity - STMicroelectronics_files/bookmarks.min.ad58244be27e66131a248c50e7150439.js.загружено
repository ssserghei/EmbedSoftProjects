function activateStarBookmarks(){"true"==isSearchUserLoggedIn&&$CQ(".js-st-toggle-star-search").find("use").attr("xlink:href","#icon-bookmark-active")}function inactivateStarBookmarks(){$CQ(".js-st-toggle-star-search").find("use").attr("xlink:href","#icon-bookmark")}var stopEventBookmarksTwice=0;
function bindBookMarksAction(){function b(){$(".st-popover").each(function(){$(this).removeClass("st-popover--active")});$(".st-table--sample-buy").removeAttr("style")}getSearchBookmarks();if(stopEventBookmarksTwice)return!1;$(document).on("click",".js-st-popover-search-bookmarks",function(b){stopEventBookmarksTwice=1;b.preventDefault();var a=$(this);b=a.closest(".st-popover");b.closest(".js-st-popover-close");if(b.hasClass("st-popover--active"))b.removeClass("st-popover--active");else{if(1!==a.data("show-results")&&
a.parents().hasClass("st-search-results-nav")){var d=b.children(".st-popover__wrapper");d.find(".st-popover__title").text(a.data("login-message-header"));d.find(".st-popover__content").html('\x3cp class\x3d"st-font-size--xs"\x3e'+a.data("login-message-content")+"\x3c/div\x3e");d.find(".st-popover__footer").hide()}1==a.data("show-results")&&a.hasClass("js-st-toggle-star")||($(".st-popover").removeClass("st-popover--active"),$(".st-table--search").removeClass("js-st-table--zindex"),b.closest(".st-table--search").addClass("js-st-table--zindex"),
b.addClass("st-popover--active"))}d=$(this).parent().find(".st-popover__wrapper");var e=parseFloat(d.css("padding-top")),f=parseFloat(d.css("padding-bottom")),h=parseFloat(d.css("border-top-width")),g=parseFloat(d.css("border-bottom-width"));e+=f;h+=g;g=$("\x3e *",d);var k=e+h;g.each(function(){if("absolute"!=$(this).css("position")){var b=$(this).outerHeight(!0);k+=b}});d.css("height",k);a=a.offset().left;"fixed"==d.css("position")&&(d.css("top",b.offset().top-$(window).scrollTop()+20),d.css("left",
a));180>=parseInt(window.innerWidth)-a&&(d.css("left","auto"),d.css("right",0),0<d.children(".arrow").length&&640<parseInt(window.innerWidth)&&d.addClass("st-popover__wrapper--right"));scrollTop=$(window).scrollTop()});$(window).on("resize",function(){1024>=parseInt(window.innerWidth)&&$(".js-st-popover-search-bookmarks").each(function(b,c){b=$(this);c=b.offset().left;180>=parseInt(window.innerWidth)-c&&(b.css("left","auto"),b.css("right",0))})});$(window).scroll(function(){1024>=parseInt(window.innerWidth)&&
b()});$(".st-table").scroll(function(){1024>=parseInt(window.innerWidth)&&b()});$(".js-st-popover-close").on("click",function(a){b()});$("body").on("click",function(a){b()});$(".st-popover__wrapper").on("click",function(b){b.stopPropagation()})}var bookmarksController=angular.module("bookmarksController",["ngSanitize"]);
bookmarksController.controller("BookmarksCtrl",["$scope","$http","DeleteBookmark","AddBookmark",function(b,a,c,d){b.bookmarks=[];b.message=null;b.getBookmarks=function(){var e="/bin/st/search-cx/bookmarks?rand\x3d"+(new Date).getTime();a({method:"GET",url:e,async:!0}).success(function(a){b.bookmarks=a})};b.updateMessage=function(){b.message&&b.$apply(function(){b.message=null})};b.deleteBookmark=function(a){c.getData(a).then(function(a){b.bookmarks=a;$("#divbookmarks .st-message-box--error").removeClass("active")})};
b.addBookmark=function(){activateStarBookmarks();var a=document.getElementById("searchKey").value;if(null==a||""===a)b.message="Search value is empty";else{var c=document.getElementById("searchCategories").value;d.getData("q\x3d"+a+"\x26c\x3d"+c).then(function(a){var e=a.indexOf("limit reached"),c=a.indexOf("already exists");0<e||0<c?(b.message=a,$("#divbookmarks .st-message-box--error").addClass("active"),setTimeout(function(){$("#divbookmarks .st-message-box--error").removeClass("active")},2500)):
(b.message=null,b.bookmarks=a)})}};b.searchBookmarkResults=function(b){$("#bookmark").modal("hide");closePopoverSearch();var a=b.indexOf("q\x3d")+2,e=b.indexOf("\x26c\x3d");a=b.substring(a,e);e=b.indexOf("\x26c\x3d")+3;b=b.substring(e);$("#searchCategories").val(b);$("#searchKey").val(a);analyticsBookmarkHistoryClicked=1;changeTab(a,b,1,!0)}}]);var bookmarksControllerMobile=angular.module("bookmarksControllerMobile",["ngSanitize"]);
bookmarksControllerMobile.controller("BookmarksCtrlMobile",["$scope","$http","DeleteBookmark","AddBookmark",function(b,a,c,d){b.bookmarks=[];b.message=null;b.getBookmarks=function(){var e="/bin/st/search-cx/bookmarks?rand\x3d"+(new Date).getTime();a({method:"GET",url:e,async:!0}).success(function(a){b.bookmarks=a})};b.updateMessage=function(){b.message&&b.$apply(function(){b.message=null})};b.deleteBookmark=function(a){c.getData(a).then(function(a){b.bookmarks=a;$("#divbookmarksMobile .st-message-box--error").removeClass("active")})};
b.addBookmark=function(){activateStarBookmarks();var a=document.getElementById("searchKey").value;if(null==a||""===a)b.message="Search value is empty";else{var c=document.getElementById("searchCategories").value;d.getData("q\x3d"+a+"\x26c\x3d"+c).then(function(a){var c=a.indexOf("limit reached"),e=a.indexOf("already exists");0<c||0<e?(b.message=a,$("#divbookmarksMobile .st-message-box--error").addClass("active"),setTimeout(function(){$("#divbookmarksMobile .st-message-box--error").removeClass("active")},
2500)):(b.message=null,b.bookmarks=a)})}};b.searchBookmarkResults=function(b){$("#bookmark").modal("hide");var a=b.indexOf("q\x3d")+2,c=b.indexOf("\x26c\x3d");a=b.substring(a,c);c=b.indexOf("\x26c\x3d")+3;b=b.substring(c);$("#searchCategories").val(b);$("#searchKey").val(a);analyticsBookmarkHistoryClicked=1;changeTab(a,b,1,!0)}}]);"use strict";var bookmarksApp=angular.module("bookmarksApp",["bookmarksController","bookmarksServices"]);
bookmarksApp.filter("getBookmarkName",["$sce",function(b){return function(a){var c=a.indexOf("q\x3d")+2,d=a.indexOf("\x26");c=a.substring(c,d);d=a.indexOf("c\x3d")+2;a=a.substring(d,a.length);"keywords"===a&&(a="all site");return b.trustAsHtml(c.replace(/\\"/g,'"')+'\x3cspan class\x3d"st-text-color--grey"\x3e\x26nbsp;['+a+"]\x3c/span\x3e")}}]);var bookmarksAppMobile=angular.module("bookmarksAppMobile",["bookmarksControllerMobile","bookmarksServicesMobile"]);
bookmarksAppMobile.filter("getBookmarkName",["$sce",function(b){return function(a){var c=a.indexOf("q\x3d")+2,d=a.indexOf("\x26");c=a.substring(c,d);d=a.indexOf("c\x3d")+2;a=a.substring(d,a.length);"keywords"===a&&(a="all site");return b.trustAsHtml(c.replace(/\\"/g,'"')+'\x3cspan class\x3d"st-text-color--grey"\x3e\x26nbsp;['+a+"]\x3c/span\x3e")}}]);
window.addEventListener("load",function(b){angular.bootstrap(document.getElementById("divbookmarks"),["bookmarksApp"]);angular.bootstrap(document.getElementById("divbookmarksMobile"),["bookmarksAppMobile"])});var bookmarksServices=angular.module("bookmarksServices",["ngResource"]);
bookmarksServices.factory("DeleteBookmark",["$http","$q",function(b,a){return{getData:function(c){var d=a.defer(),e=STUtils.generateGuid();c="/bin/st/search-cx/bookmarks?key\x3d"+c+"\x26a\x3ddel\x26rand\x3d"+(new Date).getTime()+"\x26sessionId\x3d"+e;b({method:"GET",url:c,async:!0,headers:{Dispatcher:"no-cache","Cache-Control":"max-age\x3d0"}}).success(function(b){d.resolve(b)});return d.promise}}}]);
bookmarksServices.factory("AddBookmark",["$http","$q",function(b,a){return{getData:function(c){var d=a.defer(),e=STUtils.generateGuid();c="/bin/st/search-cx/bookmarks?"+c+"\x26a\x3dadd\x26rand\x3d"+(new Date).getTime()+"\x26sessionId\x3d"+e;b({method:"GET",url:c,async:!0,headers:{Dispatcher:"no-cache","Cache-Control":"max-age\x3d0"}}).success(function(b){d.resolve(b)});return d.promise}}}]);var bookmarksServicesMobile=angular.module("bookmarksServicesMobile",["ngResource"]);
bookmarksServicesMobile.factory("DeleteBookmark",["$http","$q",function(b,a){return{getData:function(c){var d=a.defer(),e=STUtils.generateGuid();c="/bin/st/search-cx/bookmarks?key\x3d"+c+"\x26a\x3ddel\x26rand\x3d"+(new Date).getTime()+"\x26sessionId\x3d"+e;b({method:"GET",url:c,async:!0,headers:{Dispatcher:"no-cache","Cache-Control":"max-age\x3d0"}}).success(function(b){d.resolve(b)});return d.promise}}}]);
bookmarksServicesMobile.factory("AddBookmark",["$http","$q",function(b,a){return{getData:function(c){var d=a.defer(),e=STUtils.generateGuid();c="/bin/st/search-cx/bookmarks?"+c+"\x26a\x3dadd\x26rand\x3d"+(new Date).getTime()+"\x26sessionId\x3d"+e;b({method:"GET",url:c,async:!0,headers:{Dispatcher:"no-cache","Cache-Control":"max-age\x3d0"}}).success(function(b){d.resolve(b)});return d.promise}}}]);function sliceResultsBookmarks(b,a){b.length>a&&(b=b.slice(0,a));return b}
var bookmarksControllerTop=angular.module("bookmarksControllerTop",["ngSanitize"]);
bookmarksControllerTop.controller("BookmarksCtrlTop",["$scope","$http","DeleteBookmark","AddBookmark",function(b,a,c,d){b.bookmarks=[];b.message=null;b.getBookmarks=function(){var c="/bin/st/search-cx/bookmarks?rand\x3d"+(new Date).getTime();a({method:"GET",url:c,async:!0}).success(function(a){b.bookmarks=sliceResultsBookmarks(a,3)})};b.updateMessage=function(){b.message&&b.$apply(function(){b.message=null})};b.deleteBookmark=function(a){c.getData(a).then(function(a){b.bookmarks=a;$("#divbookmarks .st-message-box--error").removeClass("active")})};
b.addBookmark=function(){var a=document.getElementById("searchKey").value;if(null==a||""===a)b.message="Search value is empty";else{var c=document.getElementById("searchCategories").value;d.getData("q\x3d"+a+"\x26c\x3d"+c).then(function(a){var c=a.indexOf("limit reached"),d=a.indexOf("already exists");0<c||0<d?(b.message=a,$("#divbookmarks .st-message-box--error").addClass("active"),setTimeout(function(){$("#divbookmarks .st-message-box--error").removeClass("active")},2500)):(b.message=null,b.bookmarks=
a)})}};b.searchBookmarkResults=function(b){$("#bookmark").modal("hide");closeSearchWidget();var a=b.indexOf("q\x3d")+2,c=b.indexOf("\x26c\x3d");a=b.substring(a,c);c=b.indexOf("\x26c\x3d")+3;b=b.substring(c);$("#searchCategories").val(b);$("#searchKey").val(a);"undefined"==typeof searchPageId?($(".searchKey_JS").val(a),setCategoryFrom(b),$("#form-search").submit()):(analyticsBookmarkHistoryClicked=1,changeTab(a,b,1,!0))}}]);
var bookmarksControllerTopMobile=angular.module("bookmarksControllerTopMobile",["ngSanitize"]);
bookmarksControllerTopMobile.controller("BookmarksCtrlTopMobile",["$scope","$http","DeleteBookmark","AddBookmark",function(b,a,c,d){b.bookmarks=[];b.message=null;b.getBookmarks=function(){var c="/bin/st/search-cx/bookmarks?rand\x3d"+(new Date).getTime();a({method:"GET",url:c,async:!0}).success(function(a){b.bookmarks=sliceResultsBookmarks(a,3)})};b.updateMessage=function(){b.message&&b.$apply(function(){b.message=null})};b.deleteBookmark=function(a){c.getData(a).then(function(a){b.bookmarks=a;$("#divbookmarks .st-message-box--error").removeClass("active")})};
b.addBookmark=function(){var a=document.getElementById("searchKey").value;if(null==a||""===a)b.message="Search value is empty";else{var c=document.getElementById("searchCategories").value;d.getData("q\x3d"+a+"\x26c\x3d"+c).then(function(a){var c=a.indexOf("limit reached"),d=a.indexOf("already exists");0<c||0<d?(b.message=a,$("#divbookmarks .st-message-box--error").addClass("active"),setTimeout(function(){$("#divbookmarks .st-message-box--error").removeClass("active")},2500)):(b.message=null,b.bookmarks=
a)})}};b.searchBookmarkResults=function(a){var b=a.indexOf("q\x3d")+2,c=a.indexOf("\x26c\x3d");b=a.substring(b,c);c=a.indexOf("\x26c\x3d")+3;a=a.substring(c);$("#categorySearchWidgetMobile").val(a);$(".searchKey_JS").val(b);$("#form-search-desktop").submit()}}]);"use strict";var bookmarksAppTop=angular.module("bookmarksAppTop",["bookmarksControllerTop","bookmarksServicesTop"]);
bookmarksAppTop.filter("getBookmarkName",["$sce",function(b){return function(a){var c=a.indexOf("q\x3d")+2,d=a.indexOf("\x26");c=a.substring(c,d);d=a.indexOf("c\x3d")+2;a=a.substring(d,a.length);"keywords"===a&&(a="all site");return b.trustAsHtml(c.replace(/\\"/g,'"')+'\x3cspan class\x3d"st-text-color--grey"\x3e\x26nbsp;['+a+"]\x3c/span\x3e")}}]);var bookmarksAppTopMobile=angular.module("bookmarksAppTopMobile",["bookmarksControllerTopMobile","bookmarksServicesTopMobile"]);
bookmarksAppTopMobile.filter("getBookmarkName",["$sce",function(b){return function(a){var c=a.indexOf("q\x3d")+2,d=a.indexOf("\x26");c=a.substring(c,d);d=a.indexOf("c\x3d")+2;a=a.substring(d,a.length);"keywords"===a&&(a="all site");return b.trustAsHtml(c.replace(/\\"/g,'"')+'\x3cspan class\x3d"st-text-color--grey"\x3e\x26nbsp;['+a+"]\x3c/span\x3e")}}]);
angular.element(document).ready(function(){angular.bootstrap(document.getElementById("divbookmarksTop"),["bookmarksAppTop"]);angular.bootstrap(document.getElementById("divbookmarksTopMobile"),["bookmarksAppTopMobile"])});var bookmarksServicesTop=angular.module("bookmarksServicesTop",["ngResource"]);
bookmarksServicesTop.factory("DeleteBookmark",["$http","$q",function(b,a){return{getData:function(c){var d=a.defer(),e=STUtils.generateGuid();c="/bin/st/search-cx/bookmarks?key\x3d"+c+"\x26a\x3ddel\x26rand\x3d"+(new Date).getTime()+"\x26sessionId\x3d"+e;b({method:"GET",url:c,async:!0,headers:{Dispatcher:"no-cache","Cache-Control":"max-age\x3d0"}}).success(function(a){d.resolve(a)});return d.promise}}}]);
bookmarksServicesTop.factory("AddBookmark",["$http","$q",function(b,a){return{getData:function(c){var d=a.defer(),e=STUtils.generateGuid();c="/bin/st/search-cx/bookmarks?"+c+"\x26a\x3dadd\x26rand\x3d"+(new Date).getTime()+"\x26sessionId\x3d"+e;b({method:"GET",url:c,async:!0,headers:{Dispatcher:"no-cache","Cache-Control":"max-age\x3d0"}}).success(function(a){d.resolve(a)});return d.promise}}}]);var bookmarksServicesTopMobile=angular.module("bookmarksServicesTopMobile",["ngResource"]);
bookmarksServicesTopMobile.factory("DeleteBookmark",["$http","$q",function(b,a){return{getData:function(c){var d=a.defer(),e=STUtils.generateGuid();c="/bin/st/search-cx/bookmarks?key\x3d"+c+"\x26a\x3ddel\x26rand\x3d"+(new Date).getTime()+"\x26sessionId\x3d"+e;b({method:"GET",url:c,async:!0,headers:{Dispatcher:"no-cache","Cache-Control":"max-age\x3d0"}}).success(function(a){d.resolve(a)});return d.promise}}}]);
bookmarksServicesTopMobile.factory("AddBookmark",["$http","$q",function(b,a){return{getData:function(c){var d=a.defer(),e=STUtils.generateGuid();c="/bin/st/search-cx/bookmarks?"+c+"\x26a\x3dadd\x26rand\x3d"+(new Date).getTime()+"\x26sessionId\x3d"+e;b({method:"GET",url:c,async:!0,headers:{Dispatcher:"no-cache","Cache-Control":"max-age\x3d0"}}).success(function(a){d.resolve(a)});return d.promise}}}]);window.BMM=window.BMM||{};
BMM.initBMM=function(){BMM.template=document.querySelector("template#bookmark-item-template");var b=document.querySelector(".st-bmm-container");if(b){var a=b.matches(".st-bmm-anonymous"),c=document.querySelector(".js-st-bookmarks-toggle.show-for-medium-down"),d=b.querySelector(".st-bmm-close-icon");c.addEventListener("click",function(){b.classList.toggle("st-bmm-inactive")});d.addEventListener("click",function(){b.classList.toggle("st-bmm-inactive")});d=function(a){b.contains(a.target)||c.contains(a.target)||
b.classList.add("st-bmm-inactive")};document.addEventListener("click",d);document.addEventListener("scroll",d);if(!a){var e=b.querySelector(".st-bmm-bookmarks-list");a=b.querySelector(".st-bmm-add-bookmark");var f=b.querySelector(".st-bmm-add-bookmark-icon \x3e use"),h=function(a){BMM.currentSearchSaved(a)?f.setAttribute("href","#icon-bookmark-active"):f.setAttribute("href","#icon-bookmark")};BMM.setCurrentSearchSaved=h;var g=function(a){Element.prototype.replaceChildren.apply(e,a.map(BMM.bookmarkElement));
h(a)};d=function(){return BMM.fetchBookmarks().catch(function(){return console.error("failed to fetch bookmarks during mobile menu init")}).then(g)};document.addEventListener("search-done",d);d();a.addEventListener("click",function(){var a=BMM.currentSearch();a&&BMM.addBookmark(a.q,a.t).then(g).catch(function(){console.error("remote call to add bookmark failed")})})}}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",BMM.initBMM):setTimeout(BMM.initBMM,0);
BMM.currentSearch=function(){var b=location.hash;if(!b)return null;b=b.slice(1).split("-").map(function(a){a=a.split("\x3d");return 2!==a.length?null:a}).filter(function(a){return!!a}).reduce(function(a,b){a[b[0]]=b[1];return a},{});return"q"in b&&"t"in b?b:null};BMM.currentSearchSaved=function(b){var a=BMM.currentSearch();return a&&b?b.some(function(b){return b.text===a.q&&b.category===a.t}):!1};window.BMM||(window.BMM={});
BMM.bookmarkElement=function(b){var a=BMM.template.content.cloneNode(!0).children[0];a.dataset.name=b.name;a.dataset.category=b.category;a.dataset.text=b.text;var c=a.querySelector("a"),d=a.querySelector("svg");c.innerText=b.text;var e=document.createElement("span");e.className="st-bmm-item-category st-text-color-grey";c.append(e);e.innerText=" ["+b.category+"]";c.addEventListener("click",BMM.handleBookmarkClick);d.addEventListener("click",BMM.handleDeleteClick);return a};
BMM.handleBookmarkClick=function(b){b.preventDefault();"number"===typeof window.analyticsBookmarkHistoryClicked&&(window.analyticsBookmarkHistoryClicked=1);var a=b.target.closest(".st-bmm-bookmark-item");b=a.dataset.text;var c=a.dataset.category;a=a.closest(".st-bmm-container");a.classList.add("st-bmm-inactive");changeTab(b,c,1,!0);a.querySelector(".st-bmm-add-bookmark-icon \x3e use").setAttribute("href","#icon-bookmark-active")};
BMM.handleDeleteClick=function(b){var a=b.target.closest(".st-bmm-bookmark-item");BMM.deleteBookmark(a.dataset.name).then(function(){BMM.setCurrentSearchSaved();a.remove()}).catch(function(){return console.error("remote call to delete bookmark failed")})};window.BMM=window.BMM||{};BMM.endpoint=new URL(location.origin);BMM.endpoint.pathname="/bin/st/search-cx/bookmarks";
BMM.fetchBookmarks=function(){var b=Date.now(),a=new URL(BMM.endpoint);a.searchParams.append("rand",b);return fetch(a,{cache:"no-cache",credentials:"include",headers:{Dispatcher:"no-cache","cache-control":"max-age\x3d0"}}).then(function(a){return a.json()}).then(function(a){return a.map(BMM.deserialize)})};
BMM.addBookmark=function(b,a){var c=Date.now(),d=STUtils.generateGuid(),e=new URL(BMM.endpoint),f=e.searchParams;f.append("rand",c);f.append("sessionId",d);f.append("a","add");f.append("q",b);f.append("c",a);return fetch(e,{cache:"no-cache",credentials:"include",headers:{Dispatcher:"no-cache","cache-control":"max-age\x3d0"}}).then(function(a){return a.json()}).then(function(a){return a.map(BMM.deserialize)})};
BMM.deleteBookmark=function(b){var a=Date.now(),c=STUtils.generateGuid(),d=new URL(BMM.endpoint),e=d.searchParams;e.append("rand",a);e.append("sessionId",c);e.append("a","del");e.append("key",b);return fetch(d,{cache:"no-cache",headers:{Dispatcher:"no-cache","cache-control":"max-age\x3d0"},credentials:"include"}).then(function(a){return a.json()}).then(function(a){return a.map(BMM.deserialize)})};
BMM.deserialize=function(b){var a=new URLSearchParams(b.value);return{text:a.get("q"),category:a.get("c"),name:b.name}};